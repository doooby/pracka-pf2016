!function(){"use strict";function t(t,n,i){for(var r in n){if(i){var s=e.type(i);if("own"===i&&!n.hasOwnProperty(r)||"array"===s&&-1===i.indexOf(r)||"regexp"===s&&!i.test(r)||"function"===s&&!i.call(n,r))continue}var o=Object.getOwnPropertyDescriptor(n,r);!o||o.writable&&o.configurable&&o.enumerable&&!o.get&&!o.set?t[r]=n[r]:(delete t[r],Object.defineProperty(t,r,o))}return t}var e=self.Bliss=t(function(t,n){return"string"===e.type(t)?(n||document).querySelector(t):t||null},self.Bliss);t(e,{extend:t,property:e.property||"_",sources:{},noop:function(){},$:function(t,e){return t instanceof Node||t instanceof Window?[t]:Array.from("string"==typeof t?(e||document).querySelectorAll(t):t||[])},type:function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=(Object.prototype.toString.call(t).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase();return"number"==e&&isNaN(t)?"nan":e},defined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},create:function(t,n){return 1===arguments.length&&("string"===e.type(t)?n={}:(n=t,t=n.tag,delete n.tag)),e.set(document.createElement(t||"div"),n)},each:function(t,e,n){n=n||{};for(var i in t)n[i]=e.call(t,i,t[i]);return n},ready:function(t){return t=t||document,new Promise(function(e,n){"loading"!==t.readyState?e():t.addEventListener("DOMContentLoaded",function(){e()})})},Class:function(t){var n=e.noop;t.hasOwnProperty("constructor")&&(n=t.constructor,delete t.constructor);var i=t["abstract"];delete t["abstract"];var r=function(){if(i&&this.constructor===r)throw new Error("Abstract classes cannot be directly instantiated.");return this.constructor["super"]&&this.constructor["super"]!=r&&this.constructor["super"].apply(this,arguments),n.apply(this,arguments)};r["super"]=t["extends"]||null,delete t["extends"],r.prototype=e.extend(Object.create(r["super"]?r["super"].prototype:Object),{constructor:r}),e.extend(r,t["static"]),delete t["static"];for(var s in t)s in e.classProps&&(e.classProps[s].call(r,r.prototype,t[s]),delete t[s]);return e.extend(r.prototype,t),r.prototype["super"]=r["super"]?r["super"].prototype:null,r},classProps:{lazy:function(t,n,i){if(arguments.length>=3)Object.defineProperty(t,n,{get:function(){return delete this[n],this[n]=i.call(this)},configurable:!0,enumerable:!0});else if(2===arguments.length)for(var r in n)e.lazy(t,r,n[r]);return t},live:function(t,n,i){if(arguments.length>=3)"function"===e.type(i)&&(i={set:i}),Object.defineProperty(t,n,{get:function(){var t=this["_"+n],e=i.get&&i.get.call(this,t);return void 0!==e?e:t},set:function(t){var e=this["_"+n],r=i.set&&i.set.call(this,t,e);this["_"+n]=void 0!==r?r:t},configurable:i.configurable,enumerable:i.enumerable});else if(2===arguments.length)for(var r in n)e.live(t,r,n[r]);return t}},include:function(){var t=arguments[arguments.length-1],n=2===arguments.length?arguments[0]:!1,i=document.createElement("script");return n?Promise.resolve():new Promise(function(n,r){e.set(i,{async:!0,onload:function(){n(),e.remove(i)},onerror:function(){r()},src:t,inside:document.head})})},fetch:function(n,i){if(!n)throw new TypeError("URL parameter is mandatory and cannot be "+n);var r=t({url:new URL(n,location),data:"",method:"GET",headers:{},xhr:new XMLHttpRequest},i);r.method=r.method.toUpperCase(),e.hooks.run("fetch-args",r),"GET"===r.method&&r.data&&(r.url.search+=r.data),document.body.setAttribute("data-loading",r.url),r.xhr.open(r.method,r.url.href,r.async!==!1,r.user,r.password);for(var s in i)if(s in r.xhr)try{r.xhr[s]=i[s]}catch(o){self.console&&console.error(o)}"GET"===r.method||r.headers["Content-type"]||r.headers["Content-Type"]||r.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var a in r.headers)r.xhr.setRequestHeader(a,r.headers[a]);return new Promise(function(t,e){r.xhr.onload=function(){document.body.removeAttribute("data-loading"),0===r.xhr.status||r.xhr.status>=200&&r.xhr.status<300||304===r.xhr.status?t(r.xhr):e(Error(r.xhr.statusText))},r.xhr.onerror=function(){document.body.removeAttribute("data-loading"),e(Error("Network Error"))},r.xhr.send("GET"===r.method?null:r.data)})},value:function(t){var n="string"!==e.type(t);return $$(arguments).slice(+n).reduce(function(t,e){return t&&t[e]},n?t:self)}}),e.Hooks=new e.Class({add:function(t,e){this[t]=this[t]||[],this[t].push(e)},run:function(t,e){(this[t]||[]).forEach(function(t){t(e)})}}),e.hooks=new e.Hooks;var n=e.property;e.Element=function(t){this.subject=t,this.data={},this.bliss={}},e.Element.prototype={set:function(t){"string"===e.type(arguments[0])&&(t={},t[arguments[0]]=arguments[1]);for(var n in t)n in e.setProps?e.setProps[n].call(this,t[n]):n in this?this[n]=t[n]:(this.setAttribute||console.log(this),this.setAttribute(n,t[n]))},transition:function(t,n){return n=+n||400,new Promise(function(i,r){if("transition"in this.style){var s=e.extend({},this.style,/^transition(Duration|Property)$/);e.style(this,{transitionDuration:(n||400)+"ms",transitionProperty:Object.keys(t).join(", ")}),e.once(this,"transitionend",function(){clearTimeout(o),e.style(this,s),i(this)});var o=setTimeout(i,n+50,this);e.style(this,t)}else e.style(this,t),i(this)}.bind(this))},fire:function(t,n){var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),this.dispatchEvent(e.extend(i,n))}},e.setProps={style:function(t){e.extend(this.style,t)},attributes:function(t){for(var e in t)this.setAttribute(e,t[e])},properties:function(t){e.extend(this,t)},events:function(t){if(t&&t.addEventListener){var e=this;if(t[n]&&t[n].bliss){var i=t[n].bliss.listeners;for(var r in i)i[r].forEach(function(t){e.addEventListener(r,t.callback,t.capture)})}for(var s in t)0===s.indexOf("on")&&(this[s]=t[s])}else for(var o in t)o.split(/\s+/).forEach(function(e){this.addEventListener(e,t[o])},this)},once:function(t){2==arguments.length&&(t={},t[arguments[0]]=arguments[1]);var n=this;e.each(t,function(t,e){t=t.split(/\s+/);var i=function(){return t.forEach(function(t){n.removeEventListener(t,i)}),e.apply(n,arguments)};t.forEach(function(t){n.addEventListener(t,i)})})},delegate:function(t){3===arguments.length?(t={},t[arguments[0]]={},t[arguments[0]][arguments[1]]=arguments[2]):2===arguments.length&&(t={},t[arguments[0]]=arguments[1]);var n=this;e.each(t,function(t,e){n.addEventListener(t,function(t){for(var n in e)t.target.closest(n)&&e[n].call(this,t)})})},contents:function(t){(t||0===t)&&(Array.isArray(t)?t:[t]).forEach(function(t){var n=e.type(t);/^(string|number)$/.test(n)?t=document.createTextNode(t+""):"object"===n&&(t=e.create(t)),t instanceof Node&&this.appendChild(t)},this)},inside:function(t){t.appendChild(this)},before:function(t){t.parentNode.insertBefore(this,t)},after:function(t){t.parentNode.insertBefore(this,t.nextSibling)},start:function(t){t.insertBefore(this,t.firstChild)},around:function(t){t.parentNode&&e.before(this,t),(/^template$/i.test(this.nodeName)?this.content||this:this).appendChild(t)}},e.Array=function(t){this.subject=t},e.Array.prototype={all:function(t){var e=$$(arguments).slice(1);return this[t].apply(this,e)}},e.add=function(t,n,i){n=e.extend({$:!0,element:!0,array:!0},n),"string"===e.type(arguments[0])&&(t={},t[arguments[0]]=arguments[1]),e.each(t,function(t,r){"function"==e.type(r)&&(!n.element||t in e.Element.prototype&&i||(e.Element.prototype[t]=function(){return this.subject&&e.defined(r.apply(this.subject,arguments),this.subject)}),!n.array||t in e.Array.prototype&&i||(e.Array.prototype[t]=function(){var t=arguments;return this.subject.map(function(n){return n&&e.defined(r.apply(n,t),n)})}),n.$&&(e.sources[t]=e[t]=r,(n.array||n.element)&&(e[t]=function(){var i=[].slice.apply(arguments),r=i.shift(),s=n.array&&Array.isArray(r)?"Array":"Element";return e[s].prototype[t].apply({subject:r},i)})))})},e.add(e.Array.prototype,{element:!1}),e.add(e.Element.prototype),e.add(e.setProps),e.add(e.classProps,{element:!1,array:!1});var i=document.createElement("_");e.add(e.extend({},HTMLElement.prototype,function(t){return"function"===e.type(i[t])}),null,!0)}(),function(t){"use strict";if(Bliss&&!Bliss.shy){var e=Bliss.property;if(t.add({clone:function(){var e=this.cloneNode(!0),n=t.$("*",e).concat(e);return t.$("*",this).concat(this).forEach(function(e,i,r){t.events(n[i],e)}),e}},{array:!1}),Object.defineProperty(Node.prototype,e,{get:function o(){return Object.defineProperty(Node.prototype,e,{get:void 0}),Object.defineProperty(this,e,{value:new t.Element(this)}),Object.defineProperty(Node.prototype,e,{get:o}),this[e]},configurable:!0}),Object.defineProperty(Array.prototype,e,{get:function(){return Object.defineProperty(this,e,{value:new t.Array(this)}),this[e]},configurable:!0}),self.EventTarget&&"addEventListener"in EventTarget.prototype){var n=EventTarget.prototype.addEventListener,i=EventTarget.prototype.removeEventListener,r=function(t,e,n){return n.callback===t&&n.capture==e},s=function(){return!r.apply(this,arguments)};EventTarget.prototype.addEventListener=function(t,i,s){if(this[e]&&i){var o=this[e].bliss.listeners=this[e].bliss.listeners||{};o[t]=o[t]||[],0===o[t].filter(r.bind(null,i,s)).length&&o[t].push({callback:i,capture:s})}return n.call(this,t,i,s)},EventTarget.prototype.removeEventListener=function(t,n,r){if(this[e]&&n){var o=this[e].bliss.listeners=this[e].bliss.listeners||{};o[t]&&(o[t]=o[t].filter(s.bind(null,n,r)))}return i.call(this,t,n,r)}}self.$=self.$||t,self.$$=self.$$||t.$}}(Bliss),function(t){var e="object"==typeof self&&self.self==self&&self;if(e===!1)throw"cannot attach - unknown root";e.D2O=t(e,{})}(function(t,e){"use strict";return e.Vector2=function(t,e){t&&(this.x=t),e&&(this.y=e)},e.Vector2.prototype={x:0,y:0,set:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},clone:function(){return new e.Vector2(this.x,this.y)},add:function(t){return this.x+=t.x,this.y+=t.y,this}},e.Vector2.distanceBetweenPoints=function(t,e){return Math.pow(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2),.5)},e.Sprite=function(t){this.texture=t,this.width=t.width,this.height=t.height,this.position=new e.Vector2,this.motion_vector=new e.Vector2},e.Sprite.prototype={update:function(t){this.position.x+=this.motion_vector.x*t,this.position.y+=this.motion_vector.y*t},render:function(t){var e=Math.floor(this.position.x-this.width/2),n=Math.floor(this.position.y-this.height/2);t.drawImage(this.texture,e,n,this.width,this.height),this.render_more&&this.render_more(t)},setSize:function(t){t.width||(t.width=t.height*this.texture.width/this.texture.height),t.height||(t.height=t.width*this.texture.height/this.texture.width),this.width=Math.floor(t.width),this.height=Math.floor(t.height)},calcInnerRadius:function(){var t=this.width;return this.height>t&&(t=this.height),t/2},calcOuterRadius:function(){var t=new e.Vector2(this.position.x+this.width/2,this.position.y+this.height/2);return e.Vector2.distanceBetweenPoints(this.position,t)}},e.Sprite.HitCircle=function(t,n,i){this.sprite=t,this.r=n,this.offset=i||new e.Vector2},e.Sprite.HitCircle.prototype={position:function(){return this.sprite.position.clone().add(this.offset)},collide:function(t){return e.Vector2.distanceBetweenPoints(this.position(),t.position())<=this.r+t.r},render:function(t){var n,i=this.position();this.stroke_style&&(n=new e.StyleHolder(t,"stroke",this.stroke_style)),t.beginPath(),t.arc(i.x,i.y,this.r,0,2*Math.PI),t.stroke(),n&&n.reset()}},e.StyleHolder=function(t,e,n){this.context=t,this.key=e+"Style",n&&this.set(n)},e.StyleHolder.prototype={set:function(t){this.former_value=this.context[this.key],this.context[this.key]=t},reset:function(){this.context[this.key]=this.former_value}},e.TextField=function(t,e,n){this.text=t,this.position=e,n&&(this.font=n)},e.TextField.prototype={font:"14px serif",render:function(t){var n;this.fill_style&&(n=new e.StyleHolder(t,"fill",this.fill_style)),t.font=this.font,this.max_width?t.fillText(this.text,this.position.x,this.position.y,this.max_width):t.fillText(this.text,this.position.x,this.position.y),n&&n.reset()}},e.Loader=function(t){this.images={},this._callback=t,this._queue=[]},e.Loader.prototype={done:-1,enqueue:function(t){return this._queue.push(t),this},enqueueImages:function(t){return this._queue.push(function(){var e=this,n=Object.keys(t);n.forEach(function(i){var r=new Image;r.onload=function(){n.splice(n.indexOf(i),1),e.images[i]=r,0===n.length&&e.doNext()},r.src=t[i],r.name=i})}),this},doNext:function(){this.done+=1,this._callback&&this._callback.call(this,this._queue.length-this.done);var t=this._queue[this.done];t&&t.call(this)},start:function(t){t&&(this._callback=t),this.doNext()}},e.Looper=function(t,e){this._callback=e,"function"==typeof t?this._get_next_interval=t:this.interval=t,this.time_down=this._get_next_interval()},e.Looper.prototype={_get_next_interval:function(){return this.interval||1},update:function(t){this.pause||(this.time_down-=t,this.time_down<=0&&(this._callback(),this.time_down+=this._get_next_interval()),this.time_down<0&&(this.time_down=0))}},e.Looper.createCountOuted=function(t,n,i){var r=new e.Looper(n,function(){r.count_down-=1,i(r.count_down<=0?!0:!1)});return r.count_down=t,i(),r},e.Scene=function(t,n){this._objects=[],this.ctx=t,this.animator=n||e.Scene.native_animator},e.Scene.prototype={commenseAnimation:function(){var t,e=this;this.looper||(this._stop_animation=null,this.looper=function(){var n=Date.now()-t;e._checkStopAnimation()||(e.singleFrame(n/1e3),t=Date.now(),e.animator.call(null,e.looper))},t=Date.now(),this.animator.call(null,this.looper))},commenseTickingAnimation:function(t){var e,n=this,i=0;this.looper||(this._stop_animation=null,this.looper=function(){if(i+=Date.now()-e,i>t){if(n._checkStopAnimation())return;n.singleFrame(i/1e3),i-=t,i>t&&(i=0)}e=Date.now(),n.animator.call(null,n.looper)},e=Date.now(),this.animator.call(null,this.looper))},singleFrame:function(t){var e=this.ctx;this._before_frame&&this._before_frame(self),this._objects.forEach(function(e){e.update&&e.update(t)}),this._objects.forEach(function(t){t.render&&t.render(e)}),this._after_frame&&this._after_frame(self)},stopAnimation:function(t){t||(t=!0),this._stop_animation=t},_checkStopAnimation:function(){return this._stop_animation?(this.looper=null,"function"==typeof this._stop_animation&&this._stop_animation(),this._stop_animation=null,!0):void 0},removeAll:function(){var t=this.ctx;this._objects.forEach(function(e){e.discart&&e.discart(t)}),this._objects.length=0},add:function(t){this._objects.push(t)},remove:function(t){t.discart&&t.discart(ctx),this._objects.splice(this._objects.indexOf(t),1)}},e.Scene.native_animator=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||t.mozRequestAnimationFrame,e}),function(t){var e=self,n=t(e,{});e.PF=n}(function(t,e){"use strict";var n;return e.utils={throttle:function(t,e){var n=null;return function(){var i=this,r=arguments;null==n&&(n=setTimeout(function(){t.apply(i,r),n=null},e))}}},e.canvas={container:null,buffer:null,buffer_ctx:null,buffer_wh_ratio:null,target:null,target_ctx:null,projectIntoTarget:null,prepare:function(t,e){this.buffer=document.createElement("CANVAS"),this.buffer.id="buffer",this.buffer.width=Math.floor(t*e),this.buffer.height=t,this.buffer_ctx=this.buffer.getContext("2d"),this.buffer_wh_ratio=e,this.container=$("#container")},rebuildTarget:function(){var t,e,n=this;this.container.innerHTML="",t=this.container.clientWidth,e=this.container.clientHeight,this.target=document.createElement("CANVAS"),this.target.width=t,this.target.height=e,this.container.appendChild(this.target),this.container.appendChild(this.buffer),this.target_ctx=this.target.getContext("2d"),this.target_ctx.mozImageSmoothingEnabled=!1,this.target_ctx.webkitImageSmoothingEnabled=!1,this.target_ctx.msImageSmoothingEnabled=!1,this.target_ctx.imageSmoothingEnabled=!1,this.projectIntoTarget=function(){n.target_ctx.drawImage(n.buffer,0,0,t,e)}}},e.canvas.on_resize=function(){if(e.canvas.container){var t,n,i=$(".page");n=i.clientHeight-10,t=Math.floor(n*e.canvas.buffer_wh_ratio),t>i.clientWidth&&(t=i.clientWidth,n=Math.floor(t/e.canvas.buffer_wh_ratio)),$.set(e.canvas.container,{style:{width:""+t+"px",height:""+n+"px"}}),e.canvas.rebuildTarget(),e.canvas.projectIntoTarget()}},t.addEventListener("resize",e.utils.throttle(e.canvas.on_resize,300)),e.gizmos={objects:[],types:["mazlicek","penize","srdce","uspech","zdravi","stesti"],update:function(){var t=this;this.objects.forEach(function(n,i){n&&(n.position.y+=n.motion_vector.y,n.position.y>e.canvas.buffer.height-17&&(t.objects[i]=null),n.hit_circle.collide(e.player.sprite.hit_circle)&&(t.objects[i]=null))})},render:function(t){this.objects.forEach(function(e){e&&e.render(t)})},_getNextEmptyIndex:function(){var t;for(t=0;t<this.objects.length;t+=1)if(!this.objects[t])return t;return this.objects.length},getNextGizmo:function(){var t=this.types[Math.floor(Math.random()*this.types.length)],n=new D2O.Sprite(e.images[t]);return n.type=t,n.position.x=Math.random()*e.canvas.buffer.width,n.motion_vector.y=.5,n.hit_circle=new D2O.Sprite.HitCircle(n,3.5),n},creator:new D2O.Looper(1,function(){e.gizmos.objects[e.gizmos._getNextEmptyIndex()]=e.gizmos.getNextGizmo()})},e.player={move_speed:7,character:"chobotnice",go_left:!1,go_right:!1,createSprite:function(){var t=this,n=new D2O.Sprite(e.images[this.character]),i=n.width/2;n.position.set(Math.floor(e.canvas.buffer.width/2),e.canvas.buffer.height-27),n.update=function(n){var r=0;t.go_left&&(r-=t.move_speed),t.go_right&&(r+=t.move_speed),this.position.x+=r*n,this.position.x<i&&(this.position.x=i),this.position.x>e.canvas.buffer.width-i&&(this.position.x=e.canvas.buffer.width-i)},n.hit_circle=new D2O.Sprite.HitCircle(n,n.width/2,new D2O.Vector2(0,-n.height/3.2)),this.sprite=n}},document.addEventListener("keydown",function(t){e.player.gameplay&&(37===t.keyCode&&(e.player.go_left=!0),39===t.keyCode&&(e.player.go_right=!0))}),document.addEventListener("keyup",function(t){e.player.gameplay&&(37===t.keyCode&&(e.player.go_left=!1),39===t.keyCode&&(e.player.go_right=!1))}),e.scenes={intro:function(){e.scene.removeAll();var t=new D2O.TextField("\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed dsflsdajf\u016fl",new D2O.Vector2(4,50),"25px Pixel7");t.fill_style="black",e.scene.add(t),e.scene.singleFrame(),e.aaa=function(n){t.font=n,e.scene.singleFrame()},t.render(e.canvas.target_ctx)},gameplay:function(){e.scene.removeAll(),e.player.createSprite(),e.player.gameplay=!0,e.scene.add(e.player.sprite),e.gizmos.objects.length=0,e.scene.add(e.gizmos.creator),e.scene.add(e.gizmos),e.scene.commenseTickingAnimation(100)}},document.addEventListener("DOMContentLoaded",function(){n?n():n=!0}),(new D2O.Loader).enqueueImages({background:"/assets/pozadi-516c00712dfd2c1d306f74f719231082.png",brouk:"/assets/brouk-7fe15403bc0784a2208b71cad27371d1.png",kluk:"/assets/kluk-ad9749fb09b7bbf34f092118615745c1.png",oplatka:"/assets/oplatka-deb2abac9a52a3a3bf02cacde60eb369.png",chobotnice:"/assets/chobotnice-953418b0f48d29a0b9183b7736be6444.png",mazlicek:"/assets/mazlicek-6670e0f6485bbe198b2f9c584b81d96b.png",penize:"/assets/penize-11856fb479847225715d209bf12a7335.png",srdce:"/assets/srdce-25edd23d1ee419d6dcc778a22f9a17b7.png",uspech:"/assets/uspech-c7d91c80b14e6d79d1f4a68cda0156d9.png",zdravi:"/assets/zdravi-043effd2e1f142b9353b75a3d1edcec3.png",stesti:"/assets/stesti-3f0c8ce8ea2b9c0da3befcb7475fb3a0.png"}).enqueue(function(){n?this.doNext():n=this.doNext}).enqueue(function(){e.images=this.images,e.canvas.prepare(90,.6),e.canvas.on_resize(),e.scene=new D2O.Scene(e.canvas.buffer_ctx),e.scene.singleFrame=function(t){this._objects.forEach(function(e){e.update&&e.update(t)}),e.canvas.buffer_ctx.drawImage(e.images.background,0,0,e.canvas.buffer.width,e.canvas.buffer.height),this._objects.forEach(function(t){t.render&&t.render(e.canvas.buffer_ctx)}),e.canvas.projectIntoTarget()},e.scenes.gameplay()}).start(),e});